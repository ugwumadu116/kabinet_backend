{"version":3,"sources":["../../server/migrations/index.js"],"names":["pool","on","console","log","drop","eventsTable","interestTable","billsTable","dropTables","query","err","end","create","balanceTable","migrationQueries","res","require","printOutputFrame"],"mappings":";;;;;;;AAAA;;;;AAEAA,YAAKC,EAAL,CAAQ,SAAR,EAAmB,MAAM;AACvBC,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACD,CAFD;;AAIA,MAAMC,IAAI,GAAG,MAAM;AACjB,QAAMC,WAAW,GAAG,4CAApB;AACA,QAAMC,aAAa,GAAG,8CAAtB;AACA,QAAMC,UAAU,GAAG,sCAAnB;AACA,QAAMC,UAAU,GAAI,GAAEH,WAAY,IAAGC,aAAc,IAAGC,UAAW,GAAjE;;AAEAP,cAAKS,KAAL,CAAY,GAAED,UAAW,EAAzB,EAA6BE,GAAD,IAAS;AACnC,QAAIA,GAAJ,EAAS;AACPR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACD,KAFD,MAEO;AACLR,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;;AACDH,gBAAKW,GAAL;AACD,GAPD;AAQD,CAdD;;;;AAiBA,MAAMC,MAAM,GAAG,MAAM;AACnB,QAAMP,WAAW,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAdE;AAgBF,QAAMC,aAAa,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,IAPA;AASA,QAAMO,YAAY,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,IAPA;AASE,QAAMC,gBAAgB,GAAI,GAAET,WAAY,IAAGQ,YAAa,IAAGP,aAAc,GAAzE;;AACAN,cAAKS,KAAL,CAAY,GAAEK,gBAAiB,EAA/B,EAAkC,CAACJ,GAAD,EAAMK,GAAN,KAAc;AAC9C,QAAIL,GAAJ,EAAS;AACPR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;AACD,KAFD,MAEO;AACLR,MAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ;AACD;;AACDH,gBAAKW,GAAL;AACD,GAPD;AAQD,CA5CD;;;;AAgDA;AACAK,OAAO,CAAC,sBAAD,CAAP,CAAgC;AAC9BC,EAAAA,gBAAgB,EAAE;AADY,CAAhC","sourcesContent":["import pool from '../config/db';\n\npool.on('connect', () => {\n  console.log('Connected');\n});\n\nconst drop = () => {\n  const eventsTable = 'DROP TABLE IF EXISTS kabinetevents CASCADE';\n  const interestTable = 'DROP TABLE IF EXISTS kabinetinterest CASCADE';\n  const billsTable = 'DROP TABLE IF EXISTS balance CASCADE';\n  const dropTables = `${eventsTable};${interestTable};${billsTable};`;\n\n  pool.query(`${dropTables}`, (err) => {\n    if (err) {\n      console.log(err);\n    } else {\n      console.log('Tables dropped');\n    }\n    pool.end();\n  });\n};\n\n\nconst create = () => {\n  const eventsTable = `CREATE TABLE IF NOT EXISTS\n  kabinetevents(\n    id SERIAL PRIMARY KEY,\n    date VARCHAR(50) NOT NULL,\n    title TEXT NOT NULL,\n    event_type TEXT NOT NULL,\n    location TEXT NOT NULL,\n    organization_name TEXT NOT NULL,\n    description TEXT NOT NULL,\n    category TEXT NOT NULL,\n    organizer_info TEXT NOT NULL,\n    website TEXT NOT NULL,\n    organizer_contact TEXT NOT NULL,\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP\n  )`;\n\nconst interestTable = `CREATE TABLE IF NOT EXISTS\nkabinetinterest(\n    id SERIAL PRIMARY KEY,\n    eventid INTEGER NOT NULL,\n    contact VARCHAR(50) NOT NULL,\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT fk_owner FOREIGN KEY (eventid) REFERENCES  kabinetevents (id)\n  )`;\n\nconst balanceTable = `CREATE TABLE IF NOT EXISTS\n  balance(\n    id SERIAL PRIMARY KEY,\n    userid INTEGER NOT NULL,\n    wallet_amount VARCHAR(100) NOT NULL,\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT fk_owner FOREIGN KEY (userid) REFERENCES  users (id)\n  )`;\n \n  const migrationQueries = `${eventsTable};${balanceTable};${interestTable};`;\n  pool.query(`${migrationQueries}`, (err, res) => {\n    if (err) {\n      console.log(err);\n    } else {\n      console.log('Database migration successfully executed!');\n    }\n    pool.end();\n  });\n};\n\nexport { drop, create };\n\n// eslint-disable-next-line eol-last\nrequire('make-runnable/custom')({\n  printOutputFrame: false,\n});\n"],"file":"index.js"}